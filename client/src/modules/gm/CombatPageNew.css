/**
 * GM Combat Page V2 - Immersive Dark Fantasy Styling
 *
 * Arcane war room aesthetic with mystic undertones.
 * The GM commands from the shadows, orchestrating fate.
 */

/* ═══════════════════════════════════════════════════════════════════════════
   BASE LAYOUT
   ═══════════════════════════════════════════════════════════════════════════ */

.gm-combat-v2 {
  --combat-bg: hsl(220 25% 8%);
  --combat-surface: hsl(220 20% 12%);
  --combat-surface-raised: hsl(220 18% 16%);
  --combat-surface-overlay: hsl(220 22% 10% / 0.95);
  --combat-border: hsl(220 15% 22%);
  --combat-border-strong: hsl(220 15% 30%);

  --combat-glow-ember: 0 0 30px hsl(24 95% 53% / 0.15);
  --combat-glow-storm: 0 0 30px hsl(203 89% 47% / 0.15);
  --combat-glow-jade: 0 0 30px hsl(142 76% 36% / 0.15);
  --combat-glow-blood: 0 0 30px hsl(0 84% 60% / 0.15);

  display: flex;
  flex-direction: column;
  min-height: 100vh;
  background: var(--combat-bg);
  color: var(--text-primary);
  font-family: var(--font-body);

  /* Subtle texture overlay */
  background-image:
    radial-gradient(ellipse at 20% 0%, hsl(280 40% 15% / 0.15) 0%, transparent 50%),
    radial-gradient(ellipse at 80% 100%, hsl(220 60% 15% / 0.2) 0%, transparent 50%),
    url("data:image/svg+xml,%3Csvg viewBox='0 0 256 256' xmlns='http://www.w3.org/2000/svg'%3E%3Cfilter id='noise'%3E%3CfeTurbulence type='fractalNoise' baseFrequency='0.8' numOctaves='4' stitchTiles='stitch'/%3E%3C/filter%3E%3Crect width='100%25' height='100%25' filter='url(%23noise)' opacity='0.02'/%3E%3C/svg%3E");
}

/* ═══════════════════════════════════════════════════════════════════════════
   HEADER
   ═══════════════════════════════════════════════════════════════════════════ */

.gm-combat-v2__header {
  position: sticky;
  top: 0;
  z-index: var(--z-sticky);
  background: var(--combat-surface-overlay);
  border-bottom: 1px solid var(--combat-border);
  backdrop-filter: blur(12px);
}

.gm-combat-v2__header-content {
  display: flex;
  align-items: center;
  justify-content: space-between;
  gap: var(--space-6);
  padding: var(--space-4) var(--space-6);
  max-width: 1800px;
  margin: 0 auto;
}

.gm-combat-v2__title-group {
  display: flex;
  flex-direction: column;
  gap: var(--space-1);
}

.gm-combat-v2__title {
  margin: 0;
  font-family: var(--font-display);
  font-size: var(--text-2xl);
  font-weight: 500;
  color: var(--text-primary);
  letter-spacing: var(--tracking-wide);
  text-transform: uppercase;

  /* Subtle glow effect */
  text-shadow: 0 0 40px hsl(24 95% 53% / 0.3);
}

.gm-combat-v2__subtitle {
  margin: 0;
  font-family: var(--font-ui);
  font-size: var(--text-sm);
  color: var(--text-muted);
  letter-spacing: var(--tracking-wider);
  text-transform: uppercase;
}

.gm-combat-v2__header-status {
  display: flex;
  align-items: center;
  gap: var(--space-4);
}

/* Connection Status */
.gm-combat-v2__connection {
  display: flex;
  align-items: center;
  gap: var(--space-2);
  padding: var(--space-2) var(--space-3);
  background: var(--combat-surface);
  border: 1px solid var(--combat-border);
  border-radius: var(--radius-full);
  font-family: var(--font-ui);
  font-size: var(--text-xs);
  text-transform: uppercase;
  letter-spacing: var(--tracking-wider);
}

.gm-combat-v2__connection-dot {
  width: 8px;
  height: 8px;
  border-radius: 50%;
  background: var(--text-muted);
  transition: all var(--duration-normal) var(--ease-out);
}

.gm-combat-v2__connection--connected .gm-combat-v2__connection-dot {
  background: var(--color-jade-500);
  box-shadow: 0 0 12px var(--color-jade-500);
  animation: pulse-connection 2s ease-in-out infinite;
}

.gm-combat-v2__connection--connecting .gm-combat-v2__connection-dot {
  background: var(--color-gold-500);
  animation: pulse-connection 1s ease-in-out infinite;
}

.gm-combat-v2__connection--disconnected .gm-combat-v2__connection-dot {
  background: var(--color-blood-500);
}

@keyframes pulse-connection {
  0%, 100% { opacity: 1; }
  50% { opacity: 0.5; }
}

.gm-combat-v2__connection-text {
  color: var(--text-secondary);
}

/* Error Banner */
.gm-combat-v2__error {
  display: flex;
  align-items: center;
  justify-content: space-between;
  gap: var(--space-4);
  padding: var(--space-3) var(--space-6);
  background: hsl(0 84% 60% / 0.1);
  border-top: 1px solid hsl(0 84% 60% / 0.3);
  font-family: var(--font-ui);
  font-size: var(--text-sm);
  color: var(--color-blood-400);
}

.gm-combat-v2__error button {
  padding: var(--space-1) var(--space-3);
  background: transparent;
  border: 1px solid var(--color-blood-400);
  border-radius: var(--radius-sm);
  color: var(--color-blood-400);
  font-family: var(--font-ui);
  font-size: var(--text-xs);
  cursor: pointer;
  transition: all var(--duration-fast) var(--ease-out);
}

.gm-combat-v2__error button:hover {
  background: var(--color-blood-500);
  color: white;
}

/* ═══════════════════════════════════════════════════════════════════════════
   MAIN CONTENT
   ═══════════════════════════════════════════════════════════════════════════ */

.gm-combat-v2__main {
  flex: 1;
  display: flex;
  flex-direction: column;
  padding: var(--space-6);
  max-width: 1800px;
  margin: 0 auto;
  width: 100%;
}

/* Loading State */
.gm-combat-v2__loading {
  flex: 1;
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: center;
  gap: var(--space-4);
  color: var(--text-muted);
  font-family: var(--font-body);
  font-size: var(--text-lg);
}

.gm-combat-v2__loading-spinner {
  width: 48px;
  height: 48px;
  border: 3px solid var(--combat-border);
  border-top-color: var(--color-ember-500);
  border-radius: 50%;
  animation: spin 1s linear infinite;
}

@keyframes spin {
  to { transform: rotate(360deg); }
}

/* ═══════════════════════════════════════════════════════════════════════════
   START SCREEN (No Active Combat)
   ═══════════════════════════════════════════════════════════════════════════ */

.gm-combat-v2__start-screen {
  flex: 1;
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: center;
  gap: var(--space-8);
  padding: var(--space-8);
}

.gm-combat-v2__start-card {
  display: flex;
  flex-direction: column;
  align-items: center;
  gap: var(--space-6);
  padding: var(--space-10);
  background: var(--combat-surface);
  border: 1px solid var(--combat-border);
  border-radius: var(--radius-xl);
  max-width: 480px;
  text-align: center;

  /* Dramatic border glow */
  box-shadow:
    inset 0 1px 0 hsl(220 15% 30% / 0.5),
    0 4px 24px hsl(220 25% 5% / 0.5);
}

.gm-combat-v2__start-icon {
  font-size: 4rem;
  line-height: 1;
  opacity: 0.6;
  filter: drop-shadow(0 0 20px hsl(24 95% 53% / 0.4));
}

.gm-combat-v2__start-title {
  margin: 0;
  font-family: var(--font-display);
  font-size: var(--text-2xl);
  font-weight: 500;
  color: var(--text-primary);
  letter-spacing: var(--tracking-wide);
}

.gm-combat-v2__start-desc {
  margin: 0;
  font-size: var(--text-base);
  color: var(--text-secondary);
  line-height: var(--leading-relaxed);
}

/* Initiative Mode Options */
.gm-combat-v2__start-options {
  display: flex;
  flex-direction: column;
  gap: var(--space-3);
  width: 100%;
}

.gm-combat-v2__start-option {
  display: flex;
  flex-wrap: wrap;
  align-items: center;
  gap: var(--space-3);
  padding: var(--space-4);
  background: var(--combat-surface-raised);
  border: 1px solid var(--combat-border);
  border-radius: var(--radius-lg);
  cursor: pointer;
  transition: all var(--duration-fast) var(--ease-out);
}

.gm-combat-v2__start-option:hover {
  border-color: var(--combat-border-strong);
}

.gm-combat-v2__start-option:has(input:checked) {
  border-color: var(--color-ember-500);
  background: hsl(24 95% 53% / 0.05);
}

.gm-combat-v2__start-option input {
  width: 18px;
  height: 18px;
  accent-color: var(--color-ember-500);
}

.gm-combat-v2__start-option-label {
  font-family: var(--font-ui);
  font-size: var(--text-base);
  font-weight: 500;
  color: var(--text-primary);
}

.gm-combat-v2__start-option-desc {
  flex-basis: 100%;
  padding-left: 30px;
  font-size: var(--text-sm);
  color: var(--text-muted);
}

/* Start Button */
.gm-combat-v2__start-button {
  display: flex;
  align-items: center;
  justify-content: center;
  gap: var(--space-3);
  width: 100%;
  padding: var(--space-4) var(--space-6);

  background: linear-gradient(
    180deg,
    var(--color-ember-500) 0%,
    var(--color-ember-600) 100%
  );
  border: none;
  border-radius: var(--radius-lg);

  font-family: var(--font-display);
  font-size: var(--text-lg);
  color: white;
  text-transform: uppercase;
  letter-spacing: var(--tracking-wide);

  cursor: pointer;
  transition: all var(--duration-fast) var(--ease-out);

  box-shadow:
    0 2px 8px hsl(24 95% 53% / 0.3),
    inset 0 1px 0 hsl(24 95% 70% / 0.3);
}

.gm-combat-v2__start-button:hover:not(:disabled) {
  transform: translateY(-2px);
  box-shadow:
    0 6px 20px hsl(24 95% 53% / 0.4),
    inset 0 1px 0 hsl(24 95% 70% / 0.3);
}

.gm-combat-v2__start-button:active:not(:disabled) {
  transform: translateY(0);
}

.gm-combat-v2__start-button:disabled {
  opacity: 0.5;
  cursor: not-allowed;
  filter: grayscale(0.3);
}

.gm-combat-v2__start-button-icon {
  font-size: 1.2em;
}

.gm-combat-v2__start-warning {
  margin: 0;
  font-size: var(--text-sm);
  color: var(--color-gold-400);
}

/* Roster Display */
.gm-combat-v2__roster {
  width: 100%;
  max-width: 800px;
  background: var(--combat-surface);
  border: 1px solid var(--combat-border);
  border-radius: var(--radius-lg);
  padding: var(--space-6);
}

.gm-combat-v2__roster-title {
  margin: 0 0 var(--space-2);
  font-family: var(--font-display);
  font-size: var(--text-lg);
  color: var(--text-primary);
  letter-spacing: var(--tracking-wide);
}

.gm-combat-v2__roster-count {
  font-size: var(--text-sm);
  color: var(--text-muted);
  margin-bottom: var(--space-4);
}

.gm-combat-v2__roster-grid {
  display: grid;
  grid-template-columns: repeat(auto-fill, minmax(180px, 1fr));
  gap: var(--space-3);
}

.gm-combat-v2__roster-item {
  display: flex;
  align-items: center;
  justify-content: space-between;
  gap: var(--space-2);
  padding: var(--space-3);
  background: var(--combat-surface-raised);
  border: 1px solid var(--combat-border);
  border-radius: var(--radius-md);
  border-left-width: 3px;
}

.gm-combat-v2__roster-item--ally {
  border-left-color: var(--color-jade-500);
}

.gm-combat-v2__roster-item--enemy {
  border-left-color: var(--color-blood-500);
}

.gm-combat-v2__roster-item--inactive {
  opacity: 0.4;
}

.gm-combat-v2__roster-name {
  font-family: var(--font-body);
  font-size: var(--text-sm);
  color: var(--text-primary);
  overflow: hidden;
  text-overflow: ellipsis;
  white-space: nowrap;
}

.gm-combat-v2__roster-status {
  font-family: var(--font-ui);
  font-size: var(--text-xs);
  color: var(--text-muted);
  text-transform: uppercase;
}

/* ═══════════════════════════════════════════════════════════════════════════
   ACTIVE COMBAT - GRID LAYOUT
   ═══════════════════════════════════════════════════════════════════════════ */

.gm-combat-v2__combat-grid {
  flex: 1;
  display: grid;
  grid-template-columns: 280px 1fr 320px;
  grid-template-rows: 1fr;
  gap: var(--space-6);
  min-height: 0;
}

@media (max-width: 1400px) {
  .gm-combat-v2__combat-grid {
    grid-template-columns: 260px 1fr;
  }

  .gm-combat-v2__detail-panel {
    position: fixed;
    right: 0;
    top: 0;
    bottom: 0;
    z-index: var(--z-modal);
    box-shadow: -8px 0 32px hsl(220 25% 5% / 0.5);
  }
}

@media (max-width: 900px) {
  .gm-combat-v2__combat-grid {
    grid-template-columns: 1fr;
  }

  .gm-combat-v2__sidebar {
    display: none;
  }
}

/* ═══════════════════════════════════════════════════════════════════════════
   SIDEBAR (Initiative & Controls)
   ═══════════════════════════════════════════════════════════════════════════ */

.gm-combat-v2__sidebar {
  display: flex;
  flex-direction: column;
  gap: var(--space-6);
  overflow-y: auto;
  padding-right: var(--space-2);
}

.gm-combat-v2__sidebar-section {
  background: var(--combat-surface);
  border: 1px solid var(--combat-border);
  border-radius: var(--radius-lg);
  padding: var(--space-4);
}

.gm-combat-v2__sidebar-section--danger {
  border-color: hsl(0 84% 60% / 0.3);
  background: hsl(0 84% 60% / 0.03);
}

.gm-combat-v2__sidebar-title {
  margin: 0 0 var(--space-4);
  font-family: var(--font-display);
  font-size: var(--text-sm);
  font-weight: 500;
  color: var(--text-muted);
  text-transform: uppercase;
  letter-spacing: var(--tracking-wider);
}

/* Round Info */
.gm-combat-v2__round-info {
  display: flex;
  gap: var(--space-4);
  margin-bottom: var(--space-4);
}

.gm-combat-v2__round-stat {
  flex: 1;
  display: flex;
  flex-direction: column;
  gap: var(--space-1);
  padding: var(--space-3);
  background: var(--combat-surface-raised);
  border-radius: var(--radius-md);
  text-align: center;
}

.gm-combat-v2__round-label {
  font-family: var(--font-ui);
  font-size: var(--text-xs);
  color: var(--text-muted);
  text-transform: uppercase;
  letter-spacing: var(--tracking-wider);
}

.gm-combat-v2__round-value {
  font-family: var(--font-mono);
  font-size: var(--text-xl);
  font-weight: 600;
  color: var(--text-primary);
}

/* Action Buttons */
.gm-combat-v2__round-actions {
  display: flex;
  flex-direction: column;
  gap: var(--space-2);
}

.gm-combat-v2__action-btn {
  display: flex;
  align-items: center;
  justify-content: center;
  gap: var(--space-2);
  padding: var(--space-3);

  background: var(--combat-surface-raised);
  border: 1px solid var(--combat-border);
  border-radius: var(--radius-md);

  font-family: var(--font-ui);
  font-size: var(--text-sm);
  color: var(--text-primary);

  cursor: pointer;
  transition: all var(--duration-fast) var(--ease-out);
}

.gm-combat-v2__action-btn:hover:not(:disabled) {
  border-color: var(--combat-border-strong);
  background: var(--combat-surface);
}

.gm-combat-v2__action-btn:disabled {
  opacity: 0.4;
  cursor: not-allowed;
}

.gm-combat-v2__action-btn--advance {
  background: var(--color-ember-600);
  border-color: var(--color-ember-500);
}

.gm-combat-v2__action-btn--advance:hover:not(:disabled) {
  background: var(--color-ember-500);
}

.gm-combat-v2__action-btn--resolve {
  background: var(--color-storm-600);
  border-color: var(--color-storm-500);
}

.gm-combat-v2__action-btn--resolve:hover:not(:disabled) {
  background: var(--color-storm-500);
}

/* End Combat Buttons */
.gm-combat-v2__end-actions {
  display: grid;
  grid-template-columns: 1fr 1fr 1fr;
  gap: var(--space-2);
}

.gm-combat-v2__end-btn {
  padding: var(--space-2);
  background: transparent;
  border: 1px solid var(--combat-border);
  border-radius: var(--radius-md);
  font-family: var(--font-ui);
  font-size: var(--text-xs);
  text-transform: uppercase;
  cursor: pointer;
  transition: all var(--duration-fast) var(--ease-out);
}

.gm-combat-v2__end-btn--victory {
  color: var(--color-jade-400);
  border-color: var(--color-jade-600);
}

.gm-combat-v2__end-btn--victory:hover {
  background: var(--color-jade-600);
  color: white;
}

.gm-combat-v2__end-btn--defeat {
  color: var(--color-blood-400);
  border-color: var(--color-blood-600);
}

.gm-combat-v2__end-btn--defeat:hover {
  background: var(--color-blood-600);
  color: white;
}

.gm-combat-v2__end-btn--end {
  color: var(--text-muted);
}

.gm-combat-v2__end-btn--end:hover {
  background: var(--combat-surface-raised);
  color: var(--text-primary);
}

/* ═══════════════════════════════════════════════════════════════════════════
   BATTLEFIELD (Main Combat Area)
   ═══════════════════════════════════════════════════════════════════════════ */

.gm-combat-v2__battlefield {
  display: flex;
  flex-direction: column;
  gap: var(--space-6);
  overflow-y: auto;
  padding: var(--space-2);
}

/* Active Turn Panel */
.gm-combat-v2__active-turn {
  background: var(--combat-surface);
  border: 2px solid var(--color-ember-500);
  border-radius: var(--radius-xl);
  padding: var(--space-5);

  box-shadow: var(--combat-glow-ember);

  /* Animated border glow */
  animation: active-turn-glow 3s ease-in-out infinite;
}

@keyframes active-turn-glow {
  0%, 100% { box-shadow: 0 0 20px hsl(24 95% 53% / 0.15); }
  50% { box-shadow: 0 0 40px hsl(24 95% 53% / 0.25); }
}

.gm-combat-v2__active-header {
  display: flex;
  align-items: center;
  gap: var(--space-4);
  margin-bottom: var(--space-4);
}

.gm-combat-v2__active-indicator {
  width: 48px;
  height: 48px;
  display: flex;
  align-items: center;
  justify-content: center;
  font-size: 1.5rem;
  background: var(--color-ember-600);
  border-radius: var(--radius-lg);
  color: white;

  animation: pulse-indicator 2s ease-in-out infinite;
}

@keyframes pulse-indicator {
  0%, 100% { transform: scale(1); }
  50% { transform: scale(1.05); }
}

.gm-combat-v2__active-info {
  flex: 1;
}

.gm-combat-v2__active-name {
  margin: 0;
  font-family: var(--font-display);
  font-size: var(--text-xl);
  color: var(--text-primary);
  letter-spacing: var(--tracking-wide);
}

.gm-combat-v2__active-faction {
  font-family: var(--font-ui);
  font-size: var(--text-sm);
  color: var(--text-muted);
  text-transform: uppercase;
  letter-spacing: var(--tracking-wider);
}

.gm-combat-v2__active-resources {
  display: flex;
  gap: var(--space-6);
  margin-bottom: var(--space-4);
}

.gm-combat-v2__active-status {
  padding-top: var(--space-4);
  border-top: 1px solid var(--combat-border);
}

/* Pending Action Display */
.gm-combat-v2__pending-action {
  display: flex;
  align-items: center;
  gap: var(--space-3);
  padding: var(--space-3) var(--space-4);
  margin-top: var(--space-4);
  background: var(--combat-surface-raised);
  border: 1px dashed var(--color-storm-500);
  border-radius: var(--radius-md);
}

.gm-combat-v2__pending-label {
  font-family: var(--font-ui);
  font-size: var(--text-sm);
  color: var(--text-muted);
}

.gm-combat-v2__pending-type {
  font-family: var(--font-display);
  font-size: var(--text-base);
  color: var(--color-storm-400);
  text-transform: capitalize;
}

.gm-combat-v2__pending-interruptible {
  margin-left: auto;
  font-family: var(--font-ui);
  font-size: var(--text-xs);
  color: var(--color-gold-400);
  padding: var(--space-1) var(--space-2);
  background: hsl(45 93% 47% / 0.1);
  border-radius: var(--radius-sm);
}

/* ═══════════════════════════════════════════════════════════════════════════
   FACTION GRIDS
   ═══════════════════════════════════════════════════════════════════════════ */

.gm-combat-v2__factions {
  display: grid;
  grid-template-columns: 1fr 1fr;
  gap: var(--space-6);
}

@media (max-width: 1200px) {
  .gm-combat-v2__factions {
    grid-template-columns: 1fr;
  }
}

.gm-combat-v2__faction {
  background: var(--combat-surface);
  border: 1px solid var(--combat-border);
  border-radius: var(--radius-lg);
  padding: var(--space-5);
}

.gm-combat-v2__faction--allies {
  border-left: 3px solid var(--color-jade-500);
}

.gm-combat-v2__faction--enemies {
  border-left: 3px solid var(--color-blood-500);
}

.gm-combat-v2__faction-title {
  display: flex;
  align-items: center;
  gap: var(--space-3);
  margin: 0 0 var(--space-4);
  font-family: var(--font-display);
  font-size: var(--text-base);
  font-weight: 500;
  color: var(--text-primary);
  letter-spacing: var(--tracking-wide);
}

.gm-combat-v2__faction-icon {
  font-size: 1.2em;
  opacity: 0.7;
}

.gm-combat-v2__faction-count {
  margin-left: auto;
  font-family: var(--font-mono);
  font-size: var(--text-sm);
  color: var(--text-muted);
  padding: var(--space-1) var(--space-2);
  background: var(--combat-surface-raised);
  border-radius: var(--radius-sm);
}

.gm-combat-v2__faction-grid {
  display: grid;
  grid-template-columns: repeat(auto-fill, minmax(200px, 1fr));
  gap: var(--space-3);
}

.gm-combat-v2__faction-empty {
  grid-column: 1 / -1;
  text-align: center;
  padding: var(--space-8);
  color: var(--text-muted);
  font-style: italic;
}

/* ═══════════════════════════════════════════════════════════════════════════
   DETAIL PANEL
   ═══════════════════════════════════════════════════════════════════════════ */

.gm-combat-v2__detail-panel {
  display: flex;
  flex-direction: column;
  gap: var(--space-4);
  background: var(--combat-surface);
  border: 1px solid var(--combat-border);
  border-radius: var(--radius-lg);
  padding: var(--space-5);
  overflow-y: auto;
}

.gm-combat-v2__detail-header {
  display: flex;
  align-items: center;
  justify-content: space-between;
  gap: var(--space-3);
  padding-bottom: var(--space-4);
  border-bottom: 1px solid var(--combat-border);
}

.gm-combat-v2__detail-name {
  margin: 0;
  font-family: var(--font-display);
  font-size: var(--text-lg);
  color: var(--text-primary);
}

.gm-combat-v2__detail-close {
  width: 32px;
  height: 32px;
  display: flex;
  align-items: center;
  justify-content: center;
  background: transparent;
  border: 1px solid var(--combat-border);
  border-radius: var(--radius-md);
  color: var(--text-muted);
  cursor: pointer;
  transition: all var(--duration-fast) var(--ease-out);
}

.gm-combat-v2__detail-close:hover {
  background: var(--combat-surface-raised);
  color: var(--text-primary);
}

/* Detail Sections */
.gm-combat-v2__detail-section {
  display: flex;
  flex-direction: column;
  gap: var(--space-3);
}

.gm-combat-v2__detail-section-title {
  margin: 0;
  font-family: var(--font-ui);
  font-size: var(--text-xs);
  font-weight: 500;
  color: var(--text-muted);
  text-transform: uppercase;
  letter-spacing: var(--tracking-wider);
}

/* Resource with Adjustments */
.gm-combat-v2__detail-resources {
  display: flex;
  flex-direction: column;
  gap: var(--space-3);
}

.gm-combat-v2__detail-resource {
  display: flex;
  flex-direction: column;
  gap: var(--space-2);
}

.gm-combat-v2__detail-adjust {
  display: flex;
  gap: var(--space-2);
}

.gm-combat-v2__detail-adjust button {
  flex: 1;
  padding: var(--space-2);
  background: var(--combat-surface-raised);
  border: 1px solid var(--combat-border);
  border-radius: var(--radius-sm);
  font-family: var(--font-mono);
  font-size: var(--text-sm);
  color: var(--text-secondary);
  cursor: pointer;
  transition: all var(--duration-fast) var(--ease-out);
}

.gm-combat-v2__detail-adjust button:hover {
  background: var(--combat-surface);
  border-color: var(--combat-border-strong);
  color: var(--text-primary);
}

/* Reaction Status */
.gm-combat-v2__detail-reaction {
  padding: var(--space-3);
  background: var(--combat-surface-raised);
  border-radius: var(--radius-md);
  text-align: center;
}

.gm-combat-v2__reaction-ready {
  font-family: var(--font-ui);
  font-size: var(--text-sm);
  color: var(--color-storm-400);
}

.gm-combat-v2__reaction-used {
  font-family: var(--font-ui);
  font-size: var(--text-sm);
  color: var(--text-muted);
}

/* GM Override Actions */
.gm-combat-v2__gm-actions {
  display: flex;
  flex-direction: column;
  gap: var(--space-2);
}

.gm-combat-v2__gm-btn {
  padding: var(--space-3);
  background: transparent;
  border: 1px solid var(--color-shadow-600);
  border-radius: var(--radius-md);
  font-family: var(--font-ui);
  font-size: var(--text-sm);
  color: var(--color-shadow-400);
  cursor: pointer;
  transition: all var(--duration-fast) var(--ease-out);
}

.gm-combat-v2__gm-btn:hover {
  background: var(--color-shadow-600);
  color: white;
}

/* ═══════════════════════════════════════════════════════════════════════════
   FOOTER (Combat Log)
   ═══════════════════════════════════════════════════════════════════════════ */

.gm-combat-v2__footer {
  background: var(--combat-surface);
  border-top: 1px solid var(--combat-border);
  padding: var(--space-4) var(--space-6);
}

.gm-combat-v2__log {
  max-width: 1800px;
  margin: 0 auto;
}

.gm-combat-v2__log-title {
  margin: 0 0 var(--space-3);
  font-family: var(--font-display);
  font-size: var(--text-sm);
  font-weight: 500;
  color: var(--text-muted);
  text-transform: uppercase;
  letter-spacing: var(--tracking-wider);
}

.gm-combat-v2__log-entries {
  display: flex;
  flex-wrap: wrap;
  gap: var(--space-2);
}

.gm-combat-v2__log-entry {
  display: flex;
  align-items: center;
  gap: var(--space-2);
  padding: var(--space-2) var(--space-3);
  background: var(--combat-surface-raised);
  border-radius: var(--radius-md);
  font-family: var(--font-ui);
  font-size: var(--text-xs);
}

.gm-combat-v2__log-time {
  font-family: var(--font-mono);
  color: var(--text-muted);
}

.gm-combat-v2__log-type {
  color: var(--text-secondary);
  text-transform: capitalize;
}

.gm-combat-v2__log-source {
  color: var(--text-primary);
  font-weight: 500;
}

/* Log entry type colors */
.gm-combat-v2__log-entry--round_start {
  border-left: 2px solid var(--color-gold-500);
}

.gm-combat-v2__log-entry--turn_start {
  border-left: 2px solid var(--color-ember-500);
}

.gm-combat-v2__log-entry--action {
  border-left: 2px solid var(--color-storm-500);
}

.gm-combat-v2__log-entry--reaction {
  border-left: 2px solid var(--color-storm-400);
}

.gm-combat-v2__log-entry--gm_override {
  border-left: 2px solid var(--color-shadow-500);
  background: hsl(280 80% 40% / 0.1);
}

/* ═══════════════════════════════════════════════════════════════════════════
   ERROR SCREEN
   ═══════════════════════════════════════════════════════════════════════════ */

.gm-combat-v2__error-screen {
  flex: 1;
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: center;
  gap: var(--space-4);
  text-align: center;
  color: var(--text-secondary);
}

.gm-combat-v2__error-screen h2 {
  font-family: var(--font-display);
  font-size: var(--text-xl);
  color: var(--text-primary);
  margin: 0;
}

.gm-combat-v2__error-screen p {
  margin: 0;
}

/* ═══════════════════════════════════════════════════════════════════════════
   SCROLLBAR STYLING
   ═══════════════════════════════════════════════════════════════════════════ */

.gm-combat-v2 ::-webkit-scrollbar {
  width: 8px;
  height: 8px;
}

.gm-combat-v2 ::-webkit-scrollbar-track {
  background: var(--combat-surface);
  border-radius: var(--radius-full);
}

.gm-combat-v2 ::-webkit-scrollbar-thumb {
  background: var(--combat-border);
  border-radius: var(--radius-full);
}

.gm-combat-v2 ::-webkit-scrollbar-thumb:hover {
  background: var(--combat-border-strong);
}

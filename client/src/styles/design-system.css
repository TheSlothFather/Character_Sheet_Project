/**
 * ═══════════════════════════════════════════════════════════════════════════
 * ADÛRUN DESIGN SYSTEM
 * A thematic UI framework for fantasy TTRPG applications
 * ═══════════════════════════════════════════════════════════════════════════
 *
 * Design Philosophy:
 * - "Arcane Manuscript" aesthetic - like reading from ancient tomes
 * - Layered depth with subtle atmospheric effects
 * - Rich textures without sacrificing usability
 * - Motion that feels magical, not mechanical
 */

/* ═══════════════════════════════════════════════════════════════════════════
   TYPOGRAPHY IMPORTS
   Using distinctive fonts that evoke fantasy manuscripts
   ═══════════════════════════════════════════════════════════════════════════ */

@import url('https://fonts.googleapis.com/css2?family=Cinzel:wght@400;500;600;700&family=Cormorant+Garamond:ital,wght@0,400;0,500;0,600;1,400;1,500&family=Crimson+Pro:ital,wght@0,300;0,400;0,500;0,600;1,400&display=swap');

/* ═══════════════════════════════════════════════════════════════════════════
   ROOT DESIGN TOKENS
   Core values that define the visual language
   ═══════════════════════════════════════════════════════════════════════════ */

:root {
  /* ─────────────────────────────────────────────────────────────────────────
     TYPOGRAPHY
     ───────────────────────────────────────────────────────────────────────── */

  /* Display font for titles, headers - ornate and commanding */
  --font-display: "Cinzel", "Trajan Pro", serif;

  /* Elegant body text with old-world character */
  --font-body: "Cormorant Garamond", "Crimson Pro", Georgia, serif;

  /* Readable text for smaller UI elements and data */
  --font-ui: "Crimson Pro", "Source Serif 4", Georgia, serif;

  /* Monospace for numbers, stats, dice notation */
  --font-mono: "JetBrains Mono", "Fira Code", "Consolas", monospace;

  /* Type Scale - Modular scale ratio 1.25 (major third) */
  --text-xs: 0.64rem;    /* 10.24px */
  --text-sm: 0.8rem;     /* 12.8px */
  --text-base: 1rem;     /* 16px */
  --text-md: 1.125rem;   /* 18px */
  --text-lg: 1.25rem;    /* 20px */
  --text-xl: 1.563rem;   /* 25px */
  --text-2xl: 1.953rem;  /* 31.25px */
  --text-3xl: 2.441rem;  /* 39px */
  --text-4xl: 3.052rem;  /* 48.8px */
  --text-5xl: 3.815rem;  /* 61px */

  /* Line Heights */
  --leading-none: 1;
  --leading-tight: 1.15;
  --leading-snug: 1.35;
  --leading-normal: 1.5;
  --leading-relaxed: 1.65;
  --leading-loose: 1.8;

  /* Letter Spacing */
  --tracking-tighter: -0.03em;
  --tracking-tight: -0.015em;
  --tracking-normal: 0;
  --tracking-wide: 0.025em;
  --tracking-wider: 0.05em;
  --tracking-widest: 0.1em;

  /* ─────────────────────────────────────────────────────────────────────────
     SPACING SCALE
     ───────────────────────────────────────────────────────────────────────── */
  --space-px: 1px;
  --space-0: 0;
  --space-1: 0.25rem;   /* 4px */
  --space-2: 0.5rem;    /* 8px */
  --space-3: 0.75rem;   /* 12px */
  --space-4: 1rem;      /* 16px */
  --space-5: 1.25rem;   /* 20px */
  --space-6: 1.5rem;    /* 24px */
  --space-7: 1.75rem;   /* 28px */
  --space-8: 2rem;      /* 32px */
  --space-10: 2.5rem;   /* 40px */
  --space-12: 3rem;     /* 48px */
  --space-16: 4rem;     /* 64px */
  --space-20: 5rem;     /* 80px */
  --space-24: 6rem;     /* 96px */

  /* ─────────────────────────────────────────────────────────────────────────
     BORDER RADIUS
     ───────────────────────────────────────────────────────────────────────── */
  --radius-none: 0;
  --radius-sm: 3px;
  --radius-md: 6px;
  --radius-lg: 10px;
  --radius-xl: 16px;
  --radius-2xl: 24px;
  --radius-full: 9999px;

  /* ─────────────────────────────────────────────────────────────────────────
     TRANSITIONS & ANIMATIONS
     ───────────────────────────────────────────────────────────────────────── */
  --ease-default: cubic-bezier(0.4, 0, 0.2, 1);
  --ease-in: cubic-bezier(0.4, 0, 1, 1);
  --ease-out: cubic-bezier(0, 0, 0.2, 1);
  --ease-in-out: cubic-bezier(0.4, 0, 0.2, 1);
  --ease-elastic: cubic-bezier(0.68, -0.55, 0.265, 1.55);
  --ease-bounce: cubic-bezier(0.34, 1.56, 0.64, 1);

  --duration-instant: 75ms;
  --duration-fast: 150ms;
  --duration-normal: 250ms;
  --duration-slow: 400ms;
  --duration-slower: 600ms;

  /* ─────────────────────────────────────────────────────────────────────────
     Z-INDEX SCALE
     ───────────────────────────────────────────────────────────────────────── */
  --z-base: 0;
  --z-dropdown: 100;
  --z-sticky: 200;
  --z-overlay: 300;
  --z-modal: 400;
  --z-popover: 500;
  --z-toast: 600;
  --z-tooltip: 700;
}

/* ═══════════════════════════════════════════════════════════════════════════
   PARCHMENT THEME (Light)
   Inspired by aged manuscripts, candlelit studies, and arcane libraries
   ═══════════════════════════════════════════════════════════════════════════ */

[data-theme="parchment"] {
  /* ─────────────────────────────────────────────────────────────────────────
     COLOR PALETTE
     ───────────────────────────────────────────────────────────────────────── */

  /* Primary Parchment Tones - warm, aged paper */
  --color-parchment-50: #fdfcf8;
  --color-parchment-100: #f9f5eb;
  --color-parchment-200: #f3edd9;
  --color-parchment-300: #e9dfc5;
  --color-parchment-400: #d9c9a5;
  --color-parchment-500: #c9b48a;
  --color-parchment-600: #b09868;
  --color-parchment-700: #8f7849;
  --color-parchment-800: #6b5a38;
  --color-parchment-900: #4a3f28;
  --color-parchment-950: #2d261a;

  /* Ink & Text - rich browns and blacks for readability */
  --color-ink-50: #f7f5f3;
  --color-ink-100: #e8e3dc;
  --color-ink-200: #d1c7ba;
  --color-ink-300: #b5a590;
  --color-ink-400: #9a856d;
  --color-ink-500: #7a6651;
  --color-ink-600: #5f4e3d;
  --color-ink-700: #483a2e;
  --color-ink-800: #332921;
  --color-ink-900: #211a15;
  --color-ink-950: #120e0a;

  /* Accent - Bronze/Copper for highlights and actions */
  --color-bronze-50: #fdf8f3;
  --color-bronze-100: #f9ede0;
  --color-bronze-200: #f2d9bf;
  --color-bronze-300: #e8bf94;
  --color-bronze-400: #dba066;
  --color-bronze-500: #c87f3d;
  --color-bronze-600: #a96530;
  --color-bronze-700: #864d26;
  --color-bronze-800: #643a1f;
  --color-bronze-900: #452818;
  --color-bronze-950: #2a180e;

  /* Emerald - Success states, nature magic */
  --color-emerald-50: #f2f9f4;
  --color-emerald-100: #dcf0e2;
  --color-emerald-200: #b8e0c4;
  --color-emerald-300: #86c99e;
  --color-emerald-400: #53ab75;
  --color-emerald-500: #358c56;
  --color-emerald-600: #287044;
  --color-emerald-700: #225938;
  --color-emerald-800: #1d472e;
  --color-emerald-900: #183b27;
  --color-emerald-950: #0d2116;

  /* Crimson - Danger, blood magic, combat */
  --color-crimson-50: #fdf4f3;
  --color-crimson-100: #fbe5e3;
  --color-crimson-200: #f8cfcb;
  --color-crimson-300: #f2ada6;
  --color-crimson-400: #e87f74;
  --color-crimson-500: #d9564a;
  --color-crimson-600: #c43a2f;
  --color-crimson-700: #a42e25;
  --color-crimson-800: #882923;
  --color-crimson-900: #712723;
  --color-crimson-950: #3d100e;

  /* Azure - Information, arcane magic */
  --color-azure-50: #f4f8fc;
  --color-azure-100: #e3eef8;
  --color-azure-200: #c7ddf1;
  --color-azure-300: #9dc3e7;
  --color-azure-400: #6ca3d9;
  --color-azure-500: #4a85c9;
  --color-azure-600: #396ab1;
  --color-azure-700: #305590;
  --color-azure-800: #2c4876;
  --color-azure-900: #283e62;
  --color-azure-950: #1a2741;

  /* Amber - Warnings, divine magic */
  --color-amber-50: #fefbf3;
  --color-amber-100: #fcf4de;
  --color-amber-200: #f9e6b8;
  --color-amber-300: #f4d086;
  --color-amber-400: #eeb54d;
  --color-amber-500: #e69a24;
  --color-amber-600: #cc7a18;
  --color-amber-700: #a95c16;
  --color-amber-800: #894919;
  --color-amber-900: #713c19;
  --color-amber-950: #411f0a;

  /* Violet - Psionics, mystery */
  --color-violet-50: #f9f7fc;
  --color-violet-100: #f1ecf9;
  --color-violet-200: #e4daf4;
  --color-violet-300: #d0bfeb;
  --color-violet-400: #b599de;
  --color-violet-500: #9872ce;
  --color-violet-600: #7e54b8;
  --color-violet-700: #6a449b;
  --color-violet-800: #593a7f;
  --color-violet-900: #4a3268;
  --color-violet-950: #2e1c44;

  /* ─────────────────────────────────────────────────────────────────────────
     SEMANTIC TOKENS
     ───────────────────────────────────────────────────────────────────────── */

  /* Surfaces - layered depth for card hierarchy */
  --surface-ground: var(--color-parchment-100);
  --surface-base: var(--color-parchment-50);
  --surface-raised: #ffffff;
  --surface-overlay: var(--color-parchment-200);
  --surface-sunken: var(--color-parchment-200);

  /* Borders */
  --border-subtle: var(--color-parchment-300);
  --border-default: var(--color-parchment-400);
  --border-strong: var(--color-parchment-600);
  --border-focus: var(--color-bronze-500);

  /* Text */
  --text-primary: var(--color-ink-900);
  --text-secondary: var(--color-ink-600);
  --text-tertiary: var(--color-ink-500);
  --text-muted: var(--color-ink-400);
  --text-inverse: var(--color-parchment-50);
  --text-link: var(--color-bronze-600);
  --text-link-hover: var(--color-bronze-700);

  /* Interactive states */
  --interactive-default: var(--color-bronze-500);
  --interactive-hover: var(--color-bronze-600);
  --interactive-active: var(--color-bronze-700);
  --interactive-disabled: var(--color-parchment-400);

  /* Status colors */
  --status-success: var(--color-emerald-600);
  --status-success-soft: var(--color-emerald-100);
  --status-success-strong: var(--color-emerald-700);

  --status-danger: var(--color-crimson-600);
  --status-danger-soft: var(--color-crimson-100);
  --status-danger-strong: var(--color-crimson-700);

  --status-warning: var(--color-amber-500);
  --status-warning-soft: var(--color-amber-100);
  --status-warning-strong: var(--color-amber-600);

  --status-info: var(--color-azure-500);
  --status-info-soft: var(--color-azure-100);
  --status-info-strong: var(--color-azure-600);

  /* Magic school accents */
  --magic-arcane: var(--color-azure-500);
  --magic-divine: var(--color-amber-400);
  --magic-nature: var(--color-emerald-500);
  --magic-shadow: var(--color-violet-600);
  --magic-blood: var(--color-crimson-600);
  --magic-psionic: var(--color-violet-500);

  /* Shadows - warm tinted for cohesion */
  --shadow-color: 30 40% 20%;
  --shadow-xs: 0 1px 2px hsl(var(--shadow-color) / 0.06);
  --shadow-sm: 0 2px 4px hsl(var(--shadow-color) / 0.08);
  --shadow-md: 0 4px 8px hsl(var(--shadow-color) / 0.1),
               0 2px 4px hsl(var(--shadow-color) / 0.06);
  --shadow-lg: 0 8px 16px hsl(var(--shadow-color) / 0.12),
               0 4px 8px hsl(var(--shadow-color) / 0.08);
  --shadow-xl: 0 16px 32px hsl(var(--shadow-color) / 0.14),
               0 8px 16px hsl(var(--shadow-color) / 0.1);
  --shadow-inner: inset 0 2px 4px hsl(var(--shadow-color) / 0.08);
  --shadow-glow: 0 0 20px hsl(35 60% 50% / 0.15);

  /* Special effects */
  --glow-bronze: 0 0 12px hsl(30 70% 50% / 0.3);
  --glow-success: 0 0 12px hsl(145 50% 40% / 0.25);
  --glow-danger: 0 0 12px hsl(5 70% 45% / 0.25);

  /* Texture overlays */
  --texture-noise: url("data:image/svg+xml,%3Csvg viewBox='0 0 200 200' xmlns='http://www.w3.org/2000/svg'%3E%3Cfilter id='noise'%3E%3CfeTurbulence type='fractalNoise' baseFrequency='0.9' numOctaves='4' stitchTiles='stitch'/%3E%3C/filter%3E%3Crect width='100%25' height='100%25' filter='url(%23noise)' opacity='0.03'/%3E%3C/svg%3E");

  --gradient-parchment: linear-gradient(
    135deg,
    var(--color-parchment-100) 0%,
    var(--color-parchment-50) 25%,
    var(--color-parchment-100) 50%,
    var(--color-parchment-50) 75%,
    var(--color-parchment-100) 100%
  );

  --gradient-vignette: radial-gradient(
    ellipse at center,
    transparent 0%,
    transparent 60%,
    hsl(30 30% 20% / 0.05) 100%
  );
}

/* ═══════════════════════════════════════════════════════════════════════════
   DARK FANTASY THEME
   Inspired by candlelit dungeons, ancient crypts, and midnight rituals
   ═══════════════════════════════════════════════════════════════════════════ */

[data-theme="dark-fantasy"] {
  /* ─────────────────────────────────────────────────────────────────────────
     COLOR PALETTE
     ───────────────────────────────────────────────────────────────────────── */

  /* Obsidian base - deep blacks with warm undertones */
  --color-obsidian-50: #e8e5e2;
  --color-obsidian-100: #c9c4bc;
  --color-obsidian-200: #9e968a;
  --color-obsidian-300: #746a5d;
  --color-obsidian-400: #4d453b;
  --color-obsidian-500: #352f28;
  --color-obsidian-600: #28231e;
  --color-obsidian-700: #1d1915;
  --color-obsidian-800: #14110e;
  --color-obsidian-900: #0c0a08;
  --color-obsidian-950: #060504;

  /* Bone - light accents and text */
  --color-bone-50: #fefdfb;
  --color-bone-100: #f8f4ed;
  --color-bone-200: #efe8db;
  --color-bone-300: #e4d8c4;
  --color-bone-400: #d4c4a8;
  --color-bone-500: #c2ad8a;
  --color-bone-600: #a8916c;
  --color-bone-700: #877353;
  --color-bone-800: #685840;
  --color-bone-900: #4c4030;
  --color-bone-950: #2f2720;

  /* Ember - warm accent for actions and highlights */
  --color-ember-50: #fef6f1;
  --color-ember-100: #fceadd;
  --color-ember-200: #f9d2b8;
  --color-ember-300: #f4b388;
  --color-ember-400: #ed8c52;
  --color-ember-500: #e46a26;
  --color-ember-600: #d4501a;
  --color-ember-700: #b03d17;
  --color-ember-800: #8e321a;
  --color-ember-900: #742c19;
  --color-ember-950: #3f130a;

  /* Jade - success, restoration */
  --color-jade-50: #f0fdf5;
  --color-jade-100: #dcfce8;
  --color-jade-200: #bbf7d1;
  --color-jade-300: #86efad;
  --color-jade-400: #4ade80;
  --color-jade-500: #22c55e;
  --color-jade-600: #16a34a;
  --color-jade-700: #15803c;
  --color-jade-800: #166533;
  --color-jade-900: #14532b;
  --color-jade-950: #052e14;

  /* Blood - danger, combat, vital */
  --color-blood-50: #fef2f2;
  --color-blood-100: #fee2e2;
  --color-blood-200: #fecaca;
  --color-blood-300: #fca5a5;
  --color-blood-400: #f87171;
  --color-blood-500: #ef4444;
  --color-blood-600: #dc2626;
  --color-blood-700: #b91c1c;
  --color-blood-800: #991b1b;
  --color-blood-900: #7f1d1d;
  --color-blood-950: #450a0a;

  /* Storm - arcane, information */
  --color-storm-50: #f0f7ff;
  --color-storm-100: #e0effe;
  --color-storm-200: #bae0fd;
  --color-storm-300: #7cc8fb;
  --color-storm-400: #36aaf5;
  --color-storm-500: #0c8ee6;
  --color-storm-600: #0070c4;
  --color-storm-700: #015a9f;
  --color-storm-800: #064c83;
  --color-storm-900: #0b406d;
  --color-storm-950: #072848;

  /* Gold - warnings, divine */
  --color-gold-50: #fffbeb;
  --color-gold-100: #fef3c7;
  --color-gold-200: #fde68a;
  --color-gold-300: #fcd34d;
  --color-gold-400: #fbbf24;
  --color-gold-500: #f59e0b;
  --color-gold-600: #d97706;
  --color-gold-700: #b45309;
  --color-gold-800: #92400e;
  --color-gold-900: #78350f;
  --color-gold-950: #451a03;

  /* Shadow - psionics, void */
  --color-shadow-50: #faf5ff;
  --color-shadow-100: #f3e8ff;
  --color-shadow-200: #e9d5ff;
  --color-shadow-300: #d8b4fe;
  --color-shadow-400: #c084fc;
  --color-shadow-500: #a855f7;
  --color-shadow-600: #9333ea;
  --color-shadow-700: #7e22ce;
  --color-shadow-800: #6b21a8;
  --color-shadow-900: #581c87;
  --color-shadow-950: #3b0764;

  /* ─────────────────────────────────────────────────────────────────────────
     SEMANTIC TOKENS
     ───────────────────────────────────────────────────────────────────────── */

  /* Surfaces */
  --surface-ground: var(--color-obsidian-950);
  --surface-base: var(--color-obsidian-900);
  --surface-raised: var(--color-obsidian-800);
  --surface-overlay: var(--color-obsidian-700);
  --surface-sunken: var(--color-obsidian-950);

  /* Borders */
  --border-subtle: var(--color-obsidian-700);
  --border-default: var(--color-obsidian-600);
  --border-strong: var(--color-obsidian-500);
  --border-focus: var(--color-ember-500);

  /* Text */
  --text-primary: var(--color-bone-200);
  --text-secondary: var(--color-bone-400);
  --text-tertiary: var(--color-bone-500);
  --text-muted: var(--color-bone-600);
  --text-inverse: var(--color-obsidian-900);
  --text-link: var(--color-ember-400);
  --text-link-hover: var(--color-ember-300);

  /* Interactive states */
  --interactive-default: var(--color-ember-500);
  --interactive-hover: var(--color-ember-400);
  --interactive-active: var(--color-ember-600);
  --interactive-disabled: var(--color-obsidian-600);

  /* Status colors */
  --status-success: var(--color-jade-500);
  --status-success-soft: hsl(142 76% 36% / 0.15);
  --status-success-strong: var(--color-jade-400);

  --status-danger: var(--color-blood-500);
  --status-danger-soft: hsl(0 84% 60% / 0.15);
  --status-danger-strong: var(--color-blood-400);

  --status-warning: var(--color-gold-500);
  --status-warning-soft: hsl(38 92% 50% / 0.15);
  --status-warning-strong: var(--color-gold-400);

  --status-info: var(--color-storm-500);
  --status-info-soft: hsl(203 89% 47% / 0.15);
  --status-info-strong: var(--color-storm-400);

  /* Magic school accents */
  --magic-arcane: var(--color-storm-400);
  --magic-divine: var(--color-gold-400);
  --magic-nature: var(--color-jade-400);
  --magic-shadow: var(--color-shadow-500);
  --magic-blood: var(--color-blood-500);
  --magic-psionic: var(--color-shadow-400);

  /* Shadows - deeper and more dramatic */
  --shadow-color: 20 50% 5%;
  --shadow-xs: 0 1px 2px hsl(var(--shadow-color) / 0.3);
  --shadow-sm: 0 2px 4px hsl(var(--shadow-color) / 0.4);
  --shadow-md: 0 4px 8px hsl(var(--shadow-color) / 0.5),
               0 2px 4px hsl(var(--shadow-color) / 0.3);
  --shadow-lg: 0 8px 16px hsl(var(--shadow-color) / 0.6),
               0 4px 8px hsl(var(--shadow-color) / 0.4);
  --shadow-xl: 0 16px 32px hsl(var(--shadow-color) / 0.7),
               0 8px 16px hsl(var(--shadow-color) / 0.5);
  --shadow-inner: inset 0 2px 4px hsl(var(--shadow-color) / 0.4);
  --shadow-glow: 0 0 20px hsl(20 90% 50% / 0.2);

  /* Special effects */
  --glow-ember: 0 0 16px hsl(24 95% 53% / 0.4);
  --glow-success: 0 0 16px hsl(142 71% 45% / 0.3);
  --glow-danger: 0 0 16px hsl(0 84% 60% / 0.3);

  /* Texture overlays */
  --texture-noise: url("data:image/svg+xml,%3Csvg viewBox='0 0 200 200' xmlns='http://www.w3.org/2000/svg'%3E%3Cfilter id='noise'%3E%3CfeTurbulence type='fractalNoise' baseFrequency='0.8' numOctaves='4' stitchTiles='stitch'/%3E%3C/filter%3E%3Crect width='100%25' height='100%25' filter='url(%23noise)' opacity='0.04'/%3E%3C/svg%3E");

  --gradient-depths: linear-gradient(
    180deg,
    var(--color-obsidian-900) 0%,
    var(--color-obsidian-950) 100%
  );

  --gradient-vignette: radial-gradient(
    ellipse at center,
    transparent 0%,
    transparent 40%,
    hsl(0 0% 0% / 0.4) 100%
  );
}

/* ═══════════════════════════════════════════════════════════════════════════
   BASE STYLES
   Global resets and defaults
   ═══════════════════════════════════════════════════════════════════════════ */

*,
*::before,
*::after {
  box-sizing: border-box;
}

html {
  font-size: 16px;
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
  text-rendering: optimizeLegibility;
}

body {
  margin: 0;
  font-family: var(--font-body);
  font-size: var(--text-base);
  line-height: var(--leading-normal);
  color: var(--text-primary);
  background-color: var(--surface-ground);
  background-image: var(--texture-noise), var(--gradient-vignette);
  background-attachment: fixed;
}

/* ═══════════════════════════════════════════════════════════════════════════
   TYPOGRAPHY CLASSES
   ═══════════════════════════════════════════════════════════════════════════ */

.display-1 {
  font-family: var(--font-display);
  font-size: var(--text-5xl);
  font-weight: 600;
  line-height: var(--leading-none);
  letter-spacing: var(--tracking-wide);
  text-transform: uppercase;
}

.display-2 {
  font-family: var(--font-display);
  font-size: var(--text-4xl);
  font-weight: 600;
  line-height: var(--leading-tight);
  letter-spacing: var(--tracking-wide);
}

.heading-1 {
  font-family: var(--font-display);
  font-size: var(--text-3xl);
  font-weight: 500;
  line-height: var(--leading-tight);
  letter-spacing: var(--tracking-normal);
}

.heading-2 {
  font-family: var(--font-display);
  font-size: var(--text-2xl);
  font-weight: 500;
  line-height: var(--leading-tight);
  letter-spacing: var(--tracking-normal);
}

.heading-3 {
  font-family: var(--font-display);
  font-size: var(--text-xl);
  font-weight: 500;
  line-height: var(--leading-snug);
}

.heading-4 {
  font-family: var(--font-display);
  font-size: var(--text-lg);
  font-weight: 500;
  line-height: var(--leading-snug);
}

.subtitle {
  font-family: var(--font-body);
  font-size: var(--text-lg);
  font-weight: 400;
  font-style: italic;
  line-height: var(--leading-normal);
  color: var(--text-secondary);
}

.body-lg {
  font-family: var(--font-body);
  font-size: var(--text-lg);
  line-height: var(--leading-relaxed);
}

.body {
  font-family: var(--font-body);
  font-size: var(--text-base);
  line-height: var(--leading-normal);
}

.body-sm {
  font-family: var(--font-ui);
  font-size: var(--text-sm);
  line-height: var(--leading-normal);
}

.caption {
  font-family: var(--font-ui);
  font-size: var(--text-xs);
  line-height: var(--leading-normal);
  letter-spacing: var(--tracking-wide);
  text-transform: uppercase;
  color: var(--text-tertiary);
}

.stat-value {
  font-family: var(--font-mono);
  font-size: var(--text-lg);
  font-weight: 500;
  letter-spacing: var(--tracking-tight);
}

.dice-notation {
  font-family: var(--font-mono);
  font-size: var(--text-sm);
  font-weight: 500;
  color: var(--text-secondary);
}

/* ═══════════════════════════════════════════════════════════════════════════
   COMPONENT: BUTTONS
   ═══════════════════════════════════════════════════════════════════════════ */

.btn {
  /* Reset */
  appearance: none;
  border: none;
  background: none;
  font: inherit;
  cursor: pointer;

  /* Base styles */
  display: inline-flex;
  align-items: center;
  justify-content: center;
  gap: var(--space-2);
  padding: var(--space-2) var(--space-4);
  font-family: var(--font-ui);
  font-size: var(--text-sm);
  font-weight: 500;
  line-height: var(--leading-tight);
  text-decoration: none;
  border-radius: var(--radius-md);
  transition:
    background-color var(--duration-fast) var(--ease-out),
    border-color var(--duration-fast) var(--ease-out),
    box-shadow var(--duration-fast) var(--ease-out),
    transform var(--duration-fast) var(--ease-out);

  /* Default variant (secondary) */
  background: var(--surface-raised);
  color: var(--text-primary);
  border: 1px solid var(--border-default);
  box-shadow: var(--shadow-xs);
}

.btn:hover:not(:disabled) {
  background: var(--surface-overlay);
  border-color: var(--border-strong);
  box-shadow: var(--shadow-sm);
}

.btn:active:not(:disabled) {
  transform: translateY(1px);
  box-shadow: var(--shadow-xs);
}

.btn:focus-visible {
  outline: 2px solid var(--border-focus);
  outline-offset: 2px;
}

.btn:disabled {
  opacity: 0.5;
  cursor: not-allowed;
}

/* Primary variant */
.btn--primary {
  background: var(--interactive-default);
  color: var(--text-inverse);
  border-color: var(--interactive-default);
  box-shadow: var(--shadow-sm);
}

.btn--primary:hover:not(:disabled) {
  background: var(--interactive-hover);
  border-color: var(--interactive-hover);
  box-shadow: var(--shadow-md), var(--glow-bronze, var(--glow-ember));
}

.btn--primary:active:not(:disabled) {
  background: var(--interactive-active);
}

/* Ghost variant */
.btn--ghost {
  background: transparent;
  border-color: transparent;
  box-shadow: none;
}

.btn--ghost:hover:not(:disabled) {
  background: var(--surface-overlay);
  border-color: transparent;
  box-shadow: none;
}

/* Danger variant */
.btn--danger {
  background: var(--status-danger-soft);
  color: var(--status-danger);
  border-color: var(--status-danger);
}

.btn--danger:hover:not(:disabled) {
  background: var(--status-danger);
  color: var(--text-inverse);
}

/* Success variant */
.btn--success {
  background: var(--status-success-soft);
  color: var(--status-success);
  border-color: var(--status-success);
}

.btn--success:hover:not(:disabled) {
  background: var(--status-success);
  color: var(--text-inverse);
}

/* Size variants */
.btn--sm {
  padding: var(--space-1) var(--space-3);
  font-size: var(--text-xs);
}

.btn--lg {
  padding: var(--space-3) var(--space-6);
  font-size: var(--text-base);
}

/* Icon button */
.btn--icon {
  padding: var(--space-2);
  aspect-ratio: 1;
}

.btn--icon.btn--sm {
  padding: var(--space-1);
}

.btn--icon.btn--lg {
  padding: var(--space-3);
}

/* ═══════════════════════════════════════════════════════════════════════════
   COMPONENT: FORM CONTROLS
   ═══════════════════════════════════════════════════════════════════════════ */

.input,
.select,
.textarea {
  appearance: none;
  display: block;
  width: 100%;
  padding: var(--space-2) var(--space-3);
  font-family: var(--font-ui);
  font-size: var(--text-base);
  line-height: var(--leading-normal);
  color: var(--text-primary);
  background: var(--surface-raised);
  border: 1px solid var(--border-default);
  border-radius: var(--radius-md);
  box-shadow: var(--shadow-inner);
  transition:
    border-color var(--duration-fast) var(--ease-out),
    box-shadow var(--duration-fast) var(--ease-out);
}

.input:hover:not(:disabled),
.select:hover:not(:disabled),
.textarea:hover:not(:disabled) {
  border-color: var(--border-strong);
}

.input:focus,
.select:focus,
.textarea:focus {
  outline: none;
  border-color: var(--border-focus);
  box-shadow: var(--shadow-inner), 0 0 0 3px hsl(30 70% 50% / 0.1);
}

.input:disabled,
.select:disabled,
.textarea:disabled {
  opacity: 0.5;
  cursor: not-allowed;
  background: var(--surface-sunken);
}

.input::placeholder,
.textarea::placeholder {
  color: var(--text-muted);
}

/* Input with icon */
.input-group {
  position: relative;
  display: flex;
  align-items: center;
}

.input-group__icon {
  position: absolute;
  left: var(--space-3);
  color: var(--text-muted);
  pointer-events: none;
}

.input-group .input {
  padding-left: var(--space-10);
}

/* Select with custom arrow */
.select {
  padding-right: var(--space-10);
  background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='16' height='16' viewBox='0 0 24 24' fill='none' stroke='%237a6651' stroke-width='2' stroke-linecap='round' stroke-linejoin='round'%3E%3Cpath d='m6 9 6 6 6-6'/%3E%3C/svg%3E");
  background-repeat: no-repeat;
  background-position: right var(--space-3) center;
  cursor: pointer;
}

[data-theme="dark-fantasy"] .select {
  background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='16' height='16' viewBox='0 0 24 24' fill='none' stroke='%23c2ad8a' stroke-width='2' stroke-linecap='round' stroke-linejoin='round'%3E%3Cpath d='m6 9 6 6 6-6'/%3E%3C/svg%3E");
}

/* Textarea */
.textarea {
  min-height: 120px;
  resize: vertical;
}

/* Form field wrapper */
.field {
  display: flex;
  flex-direction: column;
  gap: var(--space-1);
}

.field__label {
  font-family: var(--font-ui);
  font-size: var(--text-sm);
  font-weight: 500;
  color: var(--text-secondary);
}

.field__hint {
  font-size: var(--text-xs);
  color: var(--text-muted);
}

.field__error {
  font-size: var(--text-xs);
  color: var(--status-danger);
}

/* Checkbox & Radio */
.checkbox,
.radio {
  display: inline-flex;
  align-items: center;
  gap: var(--space-2);
  cursor: pointer;
}

.checkbox__input,
.radio__input {
  appearance: none;
  width: 18px;
  height: 18px;
  margin: 0;
  background: var(--surface-raised);
  border: 2px solid var(--border-default);
  cursor: pointer;
  transition:
    background-color var(--duration-fast) var(--ease-out),
    border-color var(--duration-fast) var(--ease-out);
}

.checkbox__input {
  border-radius: var(--radius-sm);
}

.radio__input {
  border-radius: 50%;
}

.checkbox__input:checked,
.radio__input:checked {
  background: var(--interactive-default);
  border-color: var(--interactive-default);
}

.checkbox__input:checked {
  background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='12' height='12' viewBox='0 0 24 24' fill='none' stroke='white' stroke-width='3' stroke-linecap='round' stroke-linejoin='round'%3E%3Cpath d='M20 6 9 17l-5-5'/%3E%3C/svg%3E");
  background-repeat: no-repeat;
  background-position: center;
}

.radio__input:checked {
  background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='8' height='8' viewBox='0 0 8 8'%3E%3Ccircle cx='4' cy='4' r='4' fill='white'/%3E%3C/svg%3E");
  background-repeat: no-repeat;
  background-position: center;
}

/* ═══════════════════════════════════════════════════════════════════════════
   COMPONENT: CARDS
   ═══════════════════════════════════════════════════════════════════════════ */

.card {
  position: relative;
  background: var(--surface-base);
  border: 1px solid var(--border-subtle);
  border-radius: var(--radius-lg);
  box-shadow: var(--shadow-sm);
  overflow: hidden;
  transition:
    border-color var(--duration-normal) var(--ease-out),
    box-shadow var(--duration-normal) var(--ease-out),
    transform var(--duration-normal) var(--ease-out);
}

.card--interactive {
  cursor: pointer;
}

.card--interactive:hover {
  border-color: var(--border-default);
  box-shadow: var(--shadow-md);
  transform: translateY(-2px);
}

.card--interactive:active {
  transform: translateY(0);
  box-shadow: var(--shadow-sm);
}

.card--selected {
  border-color: var(--interactive-default);
  box-shadow: var(--shadow-md), 0 0 0 2px hsl(30 70% 50% / 0.15);
}

.card__header {
  display: flex;
  align-items: center;
  justify-content: space-between;
  gap: var(--space-3);
  padding: var(--space-4);
  border-bottom: 1px solid var(--border-subtle);
}

.card__title {
  font-family: var(--font-display);
  font-size: var(--text-lg);
  font-weight: 500;
  margin: 0;
}

.card__body {
  padding: var(--space-4);
}

.card__footer {
  display: flex;
  align-items: center;
  justify-content: flex-end;
  gap: var(--space-2);
  padding: var(--space-3) var(--space-4);
  background: var(--surface-sunken);
  border-top: 1px solid var(--border-subtle);
}

/* Card variants */
.card--elevated {
  box-shadow: var(--shadow-lg);
}

.card--flush {
  border-radius: 0;
  border-left: none;
  border-right: none;
}

/* ═══════════════════════════════════════════════════════════════════════════
   COMPONENT: STAT BLOCKS
   For displaying character attributes and combat stats
   ═══════════════════════════════════════════════════════════════════════════ */

.stat-block {
  display: flex;
  flex-direction: column;
  align-items: center;
  padding: var(--space-3);
  background: var(--surface-sunken);
  border: 1px solid var(--border-subtle);
  border-radius: var(--radius-md);
  min-width: 72px;
}

.stat-block__label {
  font-family: var(--font-ui);
  font-size: var(--text-xs);
  font-weight: 500;
  text-transform: uppercase;
  letter-spacing: var(--tracking-wider);
  color: var(--text-muted);
  margin-bottom: var(--space-1);
}

.stat-block__value {
  font-family: var(--font-mono);
  font-size: var(--text-2xl);
  font-weight: 600;
  color: var(--text-primary);
  line-height: 1;
}

.stat-block__modifier {
  font-family: var(--font-mono);
  font-size: var(--text-sm);
  color: var(--text-secondary);
  margin-top: var(--space-1);
}

/* Stat block variants */
.stat-block--primary {
  background: var(--surface-base);
  border-color: var(--interactive-default);
  box-shadow: var(--shadow-sm);
}

.stat-block--primary .stat-block__value {
  color: var(--interactive-default);
}

.stat-block--danger .stat-block__value {
  color: var(--status-danger);
}

.stat-block--success .stat-block__value {
  color: var(--status-success);
}

/* Stat row for horizontal layouts */
.stat-row {
  display: flex;
  gap: var(--space-2);
  flex-wrap: wrap;
}

/* ═══════════════════════════════════════════════════════════════════════════
   COMPONENT: BADGES & TAGS
   ═══════════════════════════════════════════════════════════════════════════ */

.badge {
  display: inline-flex;
  align-items: center;
  padding: var(--space-1) var(--space-2);
  font-family: var(--font-ui);
  font-size: var(--text-xs);
  font-weight: 500;
  line-height: 1;
  text-transform: uppercase;
  letter-spacing: var(--tracking-wide);
  border-radius: var(--radius-full);
  background: var(--surface-overlay);
  color: var(--text-secondary);
  border: 1px solid var(--border-subtle);
}

.badge--primary {
  background: hsl(30 70% 50% / 0.15);
  color: var(--interactive-default);
  border-color: var(--interactive-default);
}

.badge--success {
  background: var(--status-success-soft);
  color: var(--status-success);
  border-color: var(--status-success);
}

.badge--danger {
  background: var(--status-danger-soft);
  color: var(--status-danger);
  border-color: var(--status-danger);
}

.badge--warning {
  background: var(--status-warning-soft);
  color: var(--status-warning);
  border-color: var(--status-warning);
}

.badge--info {
  background: var(--status-info-soft);
  color: var(--status-info);
  border-color: var(--status-info);
}

/* Magic school badges */
.badge--arcane {
  background: hsl(210 70% 50% / 0.15);
  color: var(--magic-arcane);
  border-color: var(--magic-arcane);
}

.badge--divine {
  background: hsl(45 90% 50% / 0.15);
  color: var(--magic-divine);
  border-color: var(--magic-divine);
}

.badge--nature {
  background: hsl(145 50% 40% / 0.15);
  color: var(--magic-nature);
  border-color: var(--magic-nature);
}

.badge--psionic {
  background: hsl(270 60% 50% / 0.15);
  color: var(--magic-psionic);
  border-color: var(--magic-psionic);
}

/* Tag (larger, more prominent) */
.tag {
  display: inline-flex;
  align-items: center;
  gap: var(--space-1);
  padding: var(--space-1) var(--space-3);
  font-family: var(--font-ui);
  font-size: var(--text-sm);
  font-weight: 500;
  border-radius: var(--radius-md);
  background: var(--surface-overlay);
  color: var(--text-primary);
  border: 1px solid var(--border-default);
}

.tag--removable {
  padding-right: var(--space-2);
}

.tag__remove {
  display: inline-flex;
  align-items: center;
  justify-content: center;
  width: 16px;
  height: 16px;
  margin-left: var(--space-1);
  background: transparent;
  border: none;
  border-radius: 50%;
  color: var(--text-muted);
  cursor: pointer;
  transition:
    background-color var(--duration-fast) var(--ease-out),
    color var(--duration-fast) var(--ease-out);
}

.tag__remove:hover {
  background: var(--status-danger-soft);
  color: var(--status-danger);
}

/* ═══════════════════════════════════════════════════════════════════════════
   COMPONENT: NAVIGATION
   ═══════════════════════════════════════════════════════════════════════════ */

.nav {
  display: flex;
  gap: var(--space-1);
}

.nav--vertical {
  flex-direction: column;
}

.nav--horizontal {
  flex-direction: row;
  align-items: center;
}

.nav__link {
  display: flex;
  align-items: center;
  gap: var(--space-2);
  padding: var(--space-2) var(--space-3);
  font-family: var(--font-ui);
  font-size: var(--text-sm);
  font-weight: 500;
  color: var(--text-secondary);
  text-decoration: none;
  border-radius: var(--radius-md);
  transition:
    background-color var(--duration-fast) var(--ease-out),
    color var(--duration-fast) var(--ease-out);
}

.nav__link:hover {
  background: var(--surface-overlay);
  color: var(--text-primary);
}

.nav__link--active {
  background: hsl(30 70% 50% / 0.1);
  color: var(--interactive-default);
}

.nav__link--active:hover {
  background: hsl(30 70% 50% / 0.15);
  color: var(--interactive-default);
}

.nav__icon {
  flex-shrink: 0;
  width: 18px;
  height: 18px;
  opacity: 0.7;
}

.nav__link--active .nav__icon {
  opacity: 1;
}

/* Tab navigation */
.tabs {
  display: flex;
  gap: var(--space-1);
  border-bottom: 1px solid var(--border-subtle);
  padding-bottom: var(--space-px);
}

.tabs__tab {
  position: relative;
  padding: var(--space-2) var(--space-4);
  font-family: var(--font-ui);
  font-size: var(--text-sm);
  font-weight: 500;
  color: var(--text-secondary);
  background: none;
  border: none;
  cursor: pointer;
  transition: color var(--duration-fast) var(--ease-out);
}

.tabs__tab::after {
  content: '';
  position: absolute;
  bottom: -1px;
  left: 0;
  right: 0;
  height: 2px;
  background: var(--interactive-default);
  transform: scaleX(0);
  transition: transform var(--duration-fast) var(--ease-out);
}

.tabs__tab:hover {
  color: var(--text-primary);
}

.tabs__tab--active {
  color: var(--interactive-default);
}

.tabs__tab--active::after {
  transform: scaleX(1);
}

/* ═══════════════════════════════════════════════════════════════════════════
   COMPONENT: MODALS & OVERLAYS
   ═══════════════════════════════════════════════════════════════════════════ */

.overlay {
  position: fixed;
  inset: 0;
  background: hsl(0 0% 0% / 0.5);
  backdrop-filter: blur(4px);
  display: flex;
  align-items: center;
  justify-content: center;
  padding: var(--space-4);
  z-index: var(--z-overlay);
  animation: overlay-fade-in var(--duration-normal) var(--ease-out);
}

@keyframes overlay-fade-in {
  from { opacity: 0; }
  to { opacity: 1; }
}

.modal {
  position: relative;
  width: 100%;
  max-width: 540px;
  max-height: calc(100vh - var(--space-8));
  background: var(--surface-base);
  border: 1px solid var(--border-default);
  border-radius: var(--radius-xl);
  box-shadow: var(--shadow-xl);
  overflow: hidden;
  display: flex;
  flex-direction: column;
  animation: modal-slide-in var(--duration-normal) var(--ease-bounce);
}

@keyframes modal-slide-in {
  from {
    opacity: 0;
    transform: translateY(-20px) scale(0.95);
  }
  to {
    opacity: 1;
    transform: translateY(0) scale(1);
  }
}

.modal--lg {
  max-width: 720px;
}

.modal--xl {
  max-width: 960px;
}

.modal--fullscreen {
  max-width: none;
  max-height: none;
  width: calc(100vw - var(--space-8));
  height: calc(100vh - var(--space-8));
  border-radius: var(--radius-lg);
}

.modal__header {
  display: flex;
  align-items: center;
  justify-content: space-between;
  gap: var(--space-3);
  padding: var(--space-4) var(--space-5);
  border-bottom: 1px solid var(--border-subtle);
}

.modal__title {
  font-family: var(--font-display);
  font-size: var(--text-xl);
  font-weight: 500;
  margin: 0;
}

.modal__close {
  display: flex;
  align-items: center;
  justify-content: center;
  width: 32px;
  height: 32px;
  background: transparent;
  border: none;
  border-radius: var(--radius-md);
  color: var(--text-muted);
  cursor: pointer;
  transition:
    background-color var(--duration-fast) var(--ease-out),
    color var(--duration-fast) var(--ease-out);
}

.modal__close:hover {
  background: var(--surface-overlay);
  color: var(--text-primary);
}

.modal__body {
  flex: 1;
  padding: var(--space-5);
  overflow-y: auto;
}

.modal__footer {
  display: flex;
  align-items: center;
  justify-content: flex-end;
  gap: var(--space-2);
  padding: var(--space-4) var(--space-5);
  background: var(--surface-sunken);
  border-top: 1px solid var(--border-subtle);
}

/* ═══════════════════════════════════════════════════════════════════════════
   COMPONENT: TOOLTIPS
   ═══════════════════════════════════════════════════════════════════════════ */

.tooltip {
  position: relative;
}

.tooltip__content {
  position: absolute;
  bottom: calc(100% + 8px);
  left: 50%;
  transform: translateX(-50%);
  padding: var(--space-2) var(--space-3);
  font-family: var(--font-ui);
  font-size: var(--text-xs);
  color: var(--text-inverse);
  background: var(--color-ink-800, var(--color-bone-100));
  border-radius: var(--radius-md);
  box-shadow: var(--shadow-lg);
  white-space: nowrap;
  pointer-events: none;
  opacity: 0;
  transition: opacity var(--duration-fast) var(--ease-out);
  z-index: var(--z-tooltip);
}

.tooltip__content::after {
  content: '';
  position: absolute;
  top: 100%;
  left: 50%;
  transform: translateX(-50%);
  border: 6px solid transparent;
  border-top-color: var(--color-ink-800, var(--color-bone-100));
}

.tooltip:hover .tooltip__content {
  opacity: 1;
}

/* ═══════════════════════════════════════════════════════════════════════════
   COMPONENT: TABLES
   ═══════════════════════════════════════════════════════════════════════════ */

.table-container {
  overflow-x: auto;
  border: 1px solid var(--border-subtle);
  border-radius: var(--radius-lg);
}

.table {
  width: 100%;
  border-collapse: collapse;
  font-family: var(--font-ui);
  font-size: var(--text-sm);
}

.table th,
.table td {
  padding: var(--space-3) var(--space-4);
  text-align: left;
  border-bottom: 1px solid var(--border-subtle);
}

.table th {
  font-weight: 600;
  color: var(--text-secondary);
  background: var(--surface-sunken);
  text-transform: uppercase;
  letter-spacing: var(--tracking-wide);
  font-size: var(--text-xs);
}

.table tbody tr {
  transition: background-color var(--duration-fast) var(--ease-out);
}

.table tbody tr:hover {
  background: var(--surface-overlay);
}

.table tbody tr:last-child td {
  border-bottom: none;
}

/* Striped variant */
.table--striped tbody tr:nth-child(odd) {
  background: var(--surface-sunken);
}

.table--striped tbody tr:nth-child(odd):hover {
  background: var(--surface-overlay);
}

/* Compact variant */
.table--compact th,
.table--compact td {
  padding: var(--space-2) var(--space-3);
}

/* ═══════════════════════════════════════════════════════════════════════════
   COMPONENT: PROGRESS & METERS
   ═══════════════════════════════════════════════════════════════════════════ */

.progress {
  width: 100%;
  height: 8px;
  background: var(--surface-sunken);
  border-radius: var(--radius-full);
  overflow: hidden;
  border: 1px solid var(--border-subtle);
}

.progress__bar {
  height: 100%;
  background: var(--interactive-default);
  border-radius: var(--radius-full);
  transition: width var(--duration-slow) var(--ease-out);
}

.progress--success .progress__bar {
  background: var(--status-success);
}

.progress--danger .progress__bar {
  background: var(--status-danger);
}

.progress--warning .progress__bar {
  background: var(--status-warning);
}

/* Health bar (with segments) */
.health-bar {
  position: relative;
  display: flex;
  gap: 2px;
  padding: 2px;
  background: var(--surface-sunken);
  border: 1px solid var(--border-default);
  border-radius: var(--radius-md);
}

.health-bar__segment {
  flex: 1;
  height: 16px;
  background: var(--status-success);
  border-radius: 2px;
  transition:
    background-color var(--duration-fast) var(--ease-out),
    opacity var(--duration-fast) var(--ease-out);
}

.health-bar__segment--damaged {
  background: var(--status-warning);
}

.health-bar__segment--critical {
  background: var(--status-danger);
  animation: pulse-danger 1s ease-in-out infinite;
}

.health-bar__segment--empty {
  background: transparent;
  opacity: 0.3;
}

@keyframes pulse-danger {
  0%, 100% { opacity: 1; }
  50% { opacity: 0.6; }
}

/* ═══════════════════════════════════════════════════════════════════════════
   COMPONENT: INITIATIVE TRACKER
   ═══════════════════════════════════════════════════════════════════════════ */

.initiative-list {
  display: flex;
  flex-direction: column;
  gap: var(--space-2);
}

.initiative-item {
  display: flex;
  align-items: center;
  gap: var(--space-3);
  padding: var(--space-3) var(--space-4);
  background: var(--surface-base);
  border: 1px solid var(--border-subtle);
  border-radius: var(--radius-md);
  transition:
    background-color var(--duration-fast) var(--ease-out),
    border-color var(--duration-fast) var(--ease-out),
    box-shadow var(--duration-fast) var(--ease-out);
}

.initiative-item--active {
  background: var(--surface-raised);
  border-color: var(--interactive-default);
  box-shadow: var(--shadow-md), 0 0 0 2px hsl(30 70% 50% / 0.1);
}

.initiative-item--player {
  border-left: 3px solid var(--status-success);
}

.initiative-item--enemy {
  border-left: 3px solid var(--status-danger);
}

.initiative-item__order {
  font-family: var(--font-mono);
  font-size: var(--text-lg);
  font-weight: 600;
  color: var(--text-muted);
  min-width: 28px;
}

.initiative-item--active .initiative-item__order {
  color: var(--interactive-default);
}

.initiative-item__name {
  flex: 1;
  font-family: var(--font-body);
  font-size: var(--text-base);
  font-weight: 500;
}

.initiative-item__hp {
  font-family: var(--font-mono);
  font-size: var(--text-sm);
  color: var(--text-secondary);
}

/* ═══════════════════════════════════════════════════════════════════════════
   COMPONENT: DICE ROLLER
   ═══════════════════════════════════════════════════════════════════════════ */

.dice-result {
  display: inline-flex;
  align-items: center;
  gap: var(--space-2);
  padding: var(--space-2) var(--space-3);
  background: var(--surface-sunken);
  border: 1px solid var(--border-default);
  border-radius: var(--radius-md);
}

.dice-result__notation {
  font-family: var(--font-mono);
  font-size: var(--text-sm);
  color: var(--text-muted);
}

.dice-result__total {
  font-family: var(--font-mono);
  font-size: var(--text-lg);
  font-weight: 700;
  color: var(--text-primary);
}

.dice-result--crit {
  border-color: var(--status-success);
  background: var(--status-success-soft);
}

.dice-result--crit .dice-result__total {
  color: var(--status-success);
}

.dice-result--fumble {
  border-color: var(--status-danger);
  background: var(--status-danger-soft);
}

.dice-result--fumble .dice-result__total {
  color: var(--status-danger);
}

/* Individual dice */
.dice {
  display: inline-flex;
  align-items: center;
  justify-content: center;
  width: 28px;
  height: 28px;
  font-family: var(--font-mono);
  font-size: var(--text-sm);
  font-weight: 600;
  background: var(--surface-raised);
  border: 1px solid var(--border-default);
  border-radius: var(--radius-sm);
}

.dice--max {
  background: var(--status-success-soft);
  border-color: var(--status-success);
  color: var(--status-success);
}

.dice--min {
  background: var(--status-danger-soft);
  border-color: var(--status-danger);
  color: var(--status-danger);
}

/* ═══════════════════════════════════════════════════════════════════════════
   LAYOUT UTILITIES
   ═══════════════════════════════════════════════════════════════════════════ */

.container {
  width: 100%;
  max-width: 1200px;
  margin: 0 auto;
  padding: 0 var(--space-4);
}

.container--narrow {
  max-width: 720px;
}

.container--wide {
  max-width: 1440px;
}

/* Stack - vertical flex with gap */
.stack {
  display: flex;
  flex-direction: column;
}

.stack--xs { gap: var(--space-1); }
.stack--sm { gap: var(--space-2); }
.stack--md { gap: var(--space-4); }
.stack--lg { gap: var(--space-6); }
.stack--xl { gap: var(--space-8); }

/* Cluster - horizontal flex with wrap */
.cluster {
  display: flex;
  flex-wrap: wrap;
  align-items: center;
}

.cluster--xs { gap: var(--space-1); }
.cluster--sm { gap: var(--space-2); }
.cluster--md { gap: var(--space-4); }
.cluster--lg { gap: var(--space-6); }

/* Grid - auto-fit responsive grid */
.grid {
  display: grid;
  gap: var(--space-4);
}

.grid--2 { grid-template-columns: repeat(2, 1fr); }
.grid--3 { grid-template-columns: repeat(3, 1fr); }
.grid--4 { grid-template-columns: repeat(4, 1fr); }

.grid--auto-sm { grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); }
.grid--auto-md { grid-template-columns: repeat(auto-fit, minmax(280px, 1fr)); }
.grid--auto-lg { grid-template-columns: repeat(auto-fit, minmax(360px, 1fr)); }

/* Sidebar layout */
.with-sidebar {
  display: flex;
  gap: var(--space-6);
}

.with-sidebar__sidebar {
  flex: 0 0 280px;
}

.with-sidebar__main {
  flex: 1;
  min-width: 0;
}

/* ═══════════════════════════════════════════════════════════════════════════
   ANIMATIONS
   ═══════════════════════════════════════════════════════════════════════════ */

/* Fade in */
@keyframes fade-in {
  from { opacity: 0; }
  to { opacity: 1; }
}

.animate-fade-in {
  animation: fade-in var(--duration-normal) var(--ease-out);
}

/* Slide up */
@keyframes slide-up {
  from {
    opacity: 0;
    transform: translateY(16px);
  }
  to {
    opacity: 1;
    transform: translateY(0);
  }
}

.animate-slide-up {
  animation: slide-up var(--duration-normal) var(--ease-out);
}

/* Scale in */
@keyframes scale-in {
  from {
    opacity: 0;
    transform: scale(0.95);
  }
  to {
    opacity: 1;
    transform: scale(1);
  }
}

.animate-scale-in {
  animation: scale-in var(--duration-normal) var(--ease-bounce);
}

/* Staggered children */
.stagger-children > * {
  opacity: 0;
  animation: slide-up var(--duration-normal) var(--ease-out) forwards;
}

.stagger-children > *:nth-child(1) { animation-delay: 0ms; }
.stagger-children > *:nth-child(2) { animation-delay: 50ms; }
.stagger-children > *:nth-child(3) { animation-delay: 100ms; }
.stagger-children > *:nth-child(4) { animation-delay: 150ms; }
.stagger-children > *:nth-child(5) { animation-delay: 200ms; }
.stagger-children > *:nth-child(6) { animation-delay: 250ms; }
.stagger-children > *:nth-child(7) { animation-delay: 300ms; }
.stagger-children > *:nth-child(8) { animation-delay: 350ms; }

/* Shimmer loading effect */
@keyframes shimmer {
  0% { background-position: -200% 0; }
  100% { background-position: 200% 0; }
}

.skeleton {
  background: linear-gradient(
    90deg,
    var(--surface-sunken) 25%,
    var(--surface-overlay) 50%,
    var(--surface-sunken) 75%
  );
  background-size: 200% 100%;
  animation: shimmer 1.5s infinite;
  border-radius: var(--radius-md);
}

/* Pulse glow for important elements */
@keyframes pulse-glow {
  0%, 100% {
    box-shadow: var(--shadow-md);
  }
  50% {
    box-shadow: var(--shadow-md), var(--glow-bronze, var(--glow-ember));
  }
}

.animate-pulse-glow {
  animation: pulse-glow 2s ease-in-out infinite;
}

/* ═══════════════════════════════════════════════════════════════════════════
   DECORATIVE ELEMENTS
   ═══════════════════════════════════════════════════════════════════════════ */

/* Ornamental divider */
.divider {
  display: flex;
  align-items: center;
  gap: var(--space-4);
  color: var(--text-muted);
}

.divider::before,
.divider::after {
  content: '';
  flex: 1;
  height: 1px;
  background: linear-gradient(
    90deg,
    transparent,
    var(--border-default),
    transparent
  );
}

.divider--ornate::before,
.divider--ornate::after {
  background: linear-gradient(
    90deg,
    transparent,
    var(--border-default) 20%,
    var(--interactive-default) 50%,
    var(--border-default) 80%,
    transparent
  );
}

/* Decorative corner flourishes */
.flourish {
  position: relative;
}

.flourish::before,
.flourish::after {
  content: '❧';
  position: absolute;
  font-size: var(--text-lg);
  color: var(--border-default);
  opacity: 0.5;
}

.flourish::before {
  top: var(--space-2);
  left: var(--space-2);
}

.flourish::after {
  bottom: var(--space-2);
  right: var(--space-2);
  transform: rotate(180deg);
}

/* Parchment texture card */
.parchment-card {
  position: relative;
  background: var(--surface-base);
  border: 1px solid var(--border-default);
  border-radius: var(--radius-lg);
  box-shadow: var(--shadow-md);
  overflow: hidden;
}

.parchment-card::before {
  content: '';
  position: absolute;
  inset: 0;
  background-image: var(--texture-noise);
  pointer-events: none;
}

/* Glowing border on hover */
.glow-border {
  position: relative;
}

.glow-border::before {
  content: '';
  position: absolute;
  inset: -2px;
  border-radius: inherit;
  background: linear-gradient(
    135deg,
    var(--interactive-default),
    transparent 40%,
    transparent 60%,
    var(--interactive-default)
  );
  opacity: 0;
  transition: opacity var(--duration-normal) var(--ease-out);
  z-index: -1;
}

.glow-border:hover::before {
  opacity: 0.5;
}

/* ═══════════════════════════════════════════════════════════════════════════
   RESPONSIVE UTILITIES
   ═══════════════════════════════════════════════════════════════════════════ */

@media (max-width: 768px) {
  .hide-mobile { display: none !important; }

  .grid--2,
  .grid--3,
  .grid--4 {
    grid-template-columns: 1fr;
  }

  .with-sidebar {
    flex-direction: column;
  }

  .with-sidebar__sidebar {
    flex: none;
  }
}

@media (min-width: 769px) {
  .hide-desktop { display: none !important; }
}

/* ═══════════════════════════════════════════════════════════════════════════
   ACCESSIBILITY
   ═══════════════════════════════════════════════════════════════════════════ */

/* Focus visible for keyboard users */
:focus-visible {
  outline: 2px solid var(--border-focus);
  outline-offset: 2px;
}

/* Reduced motion */
@media (prefers-reduced-motion: reduce) {
  *,
  *::before,
  *::after {
    animation-duration: 0.01ms !important;
    animation-iteration-count: 1 !important;
    transition-duration: 0.01ms !important;
  }
}

/* High contrast mode adjustments */
@media (prefers-contrast: high) {
  :root {
    --border-subtle: var(--border-strong);
    --text-muted: var(--text-secondary);
  }
}

/* Screen reader only */
.sr-only {
  position: absolute;
  width: 1px;
  height: 1px;
  padding: 0;
  margin: -1px;
  overflow: hidden;
  clip: rect(0, 0, 0, 0);
  white-space: nowrap;
  border: 0;
}
